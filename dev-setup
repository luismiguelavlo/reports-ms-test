#!/bin/bash

# Script de configuraciÃ³n para desarrollo de fintrace-report-ms

echo "ğŸš€ Configurando entorno de desarrollo para fintrace-report-ms..."

# Verificar que estamos en el directorio correcto
if [ ! -f "package.json" ]; then
    echo "âŒ Error: No se encontrÃ³ package.json. AsegÃºrate de estar en el directorio fintrace-report-ms"
    exit 1
fi

# Instalar dependencias
echo "ğŸ“¦ Instalando dependencias..."
npm install

if [ $? -ne 0 ]; then
    echo "âŒ Error al instalar dependencias"
    exit 1
fi

echo "âœ… Dependencias instaladas correctamente"

# Construir el proyecto
echo "ğŸ”¨ Construyendo el proyecto..."
npm run build

if [ $? -eq 0 ]; then
    echo "âœ… Proyecto construido correctamente"
else
    echo "âŒ Error al construir el proyecto"
    exit 1
fi

# Construir imagen Docker de desarrollo
echo "ğŸ³ Construyendo imagen Docker de desarrollo..."
docker build -f Dockerfile.dev -t fintrace-report-dev .

if [ $? -eq 0 ]; then
    echo "âœ… Imagen Docker construida correctamente"
else
    echo "âŒ Error al construir imagen Docker"
    exit 1
fi

echo ""
echo "ğŸ‰ ConfiguraciÃ³n de desarrollo completada exitosamente!"
echo ""
echo "ğŸ“‹ Comandos disponibles:"
echo "1. Iniciar contenedor de desarrollo: docker-compose -f docker-compose.dev.yml up"
echo "2. Ejecutar en modo desarrollo local: npm run dev"
echo "3. Construir para producciÃ³n: npm run build"
echo ""
echo "ğŸŒ La aplicaciÃ³n estarÃ¡ disponible en: http://localhost:3004" 